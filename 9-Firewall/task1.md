
# Открываем iptables

1. Установите iptables
2. Проверьте осталась ли возможность подключения по ssh к вашему серверу
3. Почему может пропасть такая возможность?
4. Откройте нужный порт на сервере чтобы восстановить подключение
5. Это будет udp или tcp прот?

# Сохраняем

6. Сохраняются ли записанные вами правила после перезагрузки?
7. Как их сохранить?

При работе с firewall не рекомендую отключаться от текущей сессии ssh. Лучше подключаться из другой консольки.

# Решение:
1. ```
   sudo apt install iptables
   ```
   (```sudo yum install iptables```)
2. ```
   ssh ashenone@ip
   ```
3. По умолчанию порт 22 закрыт на уровне правил iptables.
4. ```
   sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT
   ```
5. SSH использует протокол TCP.
6. Проверяем, сохранились ли правила после перезагрузки:
   ```
   sudo iptables -L -v
   ```
   (учитывая необходимость в следующем вопросе, предположу, что без доп. действий - нет)
7. Сохраняем правила:
   ```
   sudo iptables-save > /etc/sysconfig/iptables/rules.v4
   ```
