# Настриваем

1. Какой по умолчанию используется порт для поключения?
2. Можно ли его изменить? если да то как?
3. Какая служба отвечает за обработку запросов на подключения по ssh?
4. Какой файл конфигурации отвечает за его настройку?
5. Попробуйте подключиться по ssh к предоставленному вам серверу
6. Отредактируйте файл настроек на сервере так, чтобы была возможность подключиться к серверу используя пользователя root
7. Измените колличество ошибок ввода пароля перед сборосом соединения, покажите эти измененения
8. Создайте пользователя ssh-user и попробуйте им подключиться к серверу
9. Ограничте ему возможность подключения к серверу
10. Как вы это сделали?
11. Что хранится в файле known_hosts?

# Решение:
(Работа с SSH у меня, конечно, ещё более гипотетическая чем остальные лабораторные выполненные с тех пор как виртуалка слетела)
1. По умолчанию для подключения по SSH используется порт 22.
2. Да.
   Открываем конфиг SSH в текстовом редакторе:
   ```
   sudo nano /etc/ssh/sshd_config
   ```
   В строке ```#Port 22``` убираем знак # и меняем на нужный порт. Так:
   ```
   Port 1337
   ```
   Перезапускаем SSH:
   ```
   sudo systemctl restart sshd
   ```
3. За обработку SSH-запросов отвечает служба sshd (SSH Daemon).
4. Конфиг SSHD лежит по пути:
   ```
   /etc/ssh/sshd_config
   ```
5. ```
   ssh ashenone@ip
   ```
6. ```
   sudo nano /etc/ssh/sshd_config
   ```
   Строку ```#PermitRootLogin prohibit-password``` меняем на:
   ```
   PermitRootLogin yes
   ```
   Перезапускаем SSHD:
   ```
   sudo systemctl restart sshd
   ```
7. Строку ```#MaxAuthTries 6``` меняем на:
   ```
   MaxAuthTries 1
   ```
   (или любое другое нужное число).  
   Ребут:
   ```
   sudo systemctl restart sshd
   ```
8. ```
   sudo adduser ssh-user
   ```
   ```
   ssh ssh-user@ip
   ```
9. В конфиге добавляем строчку в конце:
   ```
   DenyUsers ssh-user
   ```
10. см. выше
11. Файл known_hosts хранит записи об известных серверах, к которым ранее подключался клиент.
